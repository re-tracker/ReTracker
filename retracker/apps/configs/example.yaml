# Example configuration for offline video tracking
# Usage: python -m retracker apps tracking --config retracker/apps/configs/example.yaml

# Input files
# Provide via CLI (`--video_path ...`) or use `--demo` to download/cache a small sample video.
video_path: null
# Optional segmentation mask; provide via `--seg_path ...` when using segmentation queries.
seg_path: null
query_path: null

# Video configuration
video:
  resized_wh: [512, 384]  # (W, H)
  auto_rotate: true
  max_frames: null  # null for all frames
  backend: auto  # auto, opencv, mediapy

# Model configuration
model:
  # Required. Download a checkpoint (see docs/MODEL_ZOO.md) and place it here,
  # or override with `--ckpt_path ...`.
  ckpt_path: null  # Required: specify via --ckpt_path or download from releases
  # Faster cold-start by skipping DINOv3 hub weight loading (the checkpoint
  # contains backbone weights). Keeps the architecture unchanged.
  fast_start: true
  interp_shape: [512, 512]  # (H, W)
  dtype: fp16  # fp32, fp16, bf16
  device: cuda
  use_amp: true
  tracking_visibility_threshold: 0.1
  matching_visibility_threshold: 0.5

# Query generation
query:
  strategy: grid  # grid, segmentation, custom
  grid_size: 20
  initial_frame: 0
  use_mask_filter: true
  margin_ratio: 0.015625  # 1/64

# Visualization
visualization:
  fps: 10
  linewidth: 3
  tracks_leave_trace: 1
  hide_occ_points: true
  colormap: jet

# Output
output:
  output_dir: "./outputs"
  save_video: true
  save_npz: false
  save_images: false
  save_txt: false
